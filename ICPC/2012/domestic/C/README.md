ACM/ICPC 2012 Domestic Contest Problem C
